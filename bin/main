#!/usr/bin/env ruby

puts 'Welcome to the Tic Tac Toe Game!'

gameover = false
play = [[' ', ' ', ' '], [' ', ' ', ' '], [' ', ' ', ' ']]
players = []

i = 0

2.times do
  puts "Please enter the name of Player #{i + 1}."
  players.push(gets.chomp)
  i += 1
end

i = 0

until gameover
  first_d = nil
  second_d = nil
  puts '   1 2 3 '
  puts '  -------'
  puts "a |#{play[0][0]}|#{play[0][1]}|#{play[0][2]}|"
  puts '  -------'
  puts "b |#{play[1][0]}|#{play[1][1]}|#{play[1][2]}|"
  puts '  -------'
  puts "c |#{play[2][0]}|#{play[2][1]}|#{play[2][2]}|"
  puts '  -------'
  puts
  if i != 9
    puts 'Note: Game is over when all squares are filled.'
    puts "Round for Player #{players[i % 2]}"
    puts 'Please enter square code to play your move. (For e.g. a1)'
    input = gets.chomp
  end

  if input.length == 2
    first_d = if input.include?('a')
                0
              elsif input.include?('b')
                1
              elsif input.include?('c')
                2
              end

    second_d = if input.include?('1')
                 0
               elsif input.include?('2')
                 1
               elsif input.include?('3')
                 2
               end

    if !first_d.nil? && !second_d.nil?
      if play[first_d][second_d] != 'x' && play[first_d][second_d] != 'o'
        play[first_d][second_d] = i.even? ? 'x' : 'o'
        puts
        gameover = true if i == 9
        i += 1
      else
        puts 'This square is already filled! Please try again!'
        puts
      end
    else
      puts 'Wrong value entered! Please try again!'
      puts
    end
  else
    puts 'Wrong value entered! Please try again!'
    puts
  end
end
