#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative '../lib/game'
require_relative '../lib/player'

# class for main
class Main
  game = Game.new

  puts 'Welcome to the Tic Tac Toe Game!'
  puts 'Please enter the name of Player 1.'
  name = gets.chomp
  player1 = Player.new(name, 'x')

  puts 'Please enter the name of Player 2.'
  name = gets.chomp
  player2 = Player.new(name, 'o')

  until game.fetch_gameover
    game.update_first_d = (nil)
    game.update_second_d = (nil)
    game.print_game

    if game.fetch_move_num < 10
      current_player = game.fetch_move_num.odd? ? player1 : player2
      puts 'Note: Game is over when all squares are filled.'
      puts "Round for Player #{current_player.fetch_name}"
      puts 'Please enter square code to play your move. (For e.g. a1)'
      input = gets.chomp
      game.check_valid_input(input, current_player)
    else
      game.game_over
    end
  end
end
